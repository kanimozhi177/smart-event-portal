<!DOCTYPE html>
<html>
<head>
<title>Smart Event Attendance QR</title>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<style>
body{ font-family: Arial; text-align:center; background:linear-gradient(to right,#4facfe,#00f2fe); color:black; }
.event-box{ background:white; padding:25px; margin:40px auto; width:350px; border-radius:15px; box-shadow:0 10px 20px rgba(0,0,0,0.2); }
input{ width:80%; padding:8px; margin:8px 0;}
button{ padding:10px 20px; background:blue; color:white; border:none; border-radius:5px; cursor:pointer;}
button:hover{ background:darkblue;}
#certificate{ display:none; background:white; padding:25px; margin:30px auto; width:400px; border-radius:15px; border:5px solid black;}
#qrcode{ margin-top:20px; }
</style>
</head>
<body>

<h1>AI Workshop 2026</h1>

<div class="event-box">
  <h3>Enter Your Name for QR Attendance</h3>
  <input type="text" id="studentName" placeholder="Your Name"><br>
  <button onclick="generateQR()">Generate Your QR</button>
  <div id="qrcode"></div>
  <br>
  <button onclick="markAttendance()">Scan QR & Mark Attendance</button>
  <p id="attendanceMsg"></p>
</div>

<!-- Certificate -->
<div id="certificate">
  <h2>Certificate of Participation</h2>
  <p>This is to certify that</p>
  <h3 id="certName"></h3>
  <p>has successfully attended AI Workshop 2026</p>
  <p>Date: March 10, 2026</p>
  <button onclick="window.print()">Print / Download</button>
</div>

<script>
let studentData="";

function generateQR(){
  const name = document.getElementById("studentName").value.trim();
  if(!name){ alert("Enter your name first!"); return; }
  studentData = name; // store name to simulate QR scan
  const qrDiv = document.getElementById("qrcode");
  qrDiv.innerHTML="";
  QRCode.toCanvas(name, {width:200}, function(error, canvas){
    if(error) console.error(error);
    qrDiv.appendChild(canvas);
  });
}

function markAttendance(){
  if(!studentData){
    alert("Please generate your QR first!");
    return;
  }
  const today = new Date().toLocaleString();
  document.getElementById("attendanceMsg").innerHTML = "Attendance Marked âœ… <br> Time: " + today;

  document.getElementById("certificate").style.display = "block";
  document.getElementById("certName").innerText = studentData;
}
</script>

</body>
</html>
